<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>RF Driver – Convide Amigos</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  background:#000;
  color:#fff;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  padding:20px;
}

.top{
  background:#facc15;
  color:#000;
  padding:20px;
  font-weight:600;
  margin:-20px -20px 30px -20px;
}

.box{
  background:#111;
  padding:20px;
  border-radius:16px;
}

.link{
  word-break:break-all;
  margin-top:15px;
  font-size:.85rem;
  opacity:.8;
}

button{
  margin-top:15px;
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#facc15;
  font-weight:700;
  cursor:pointer;
}
</style>
</head>
<body>

<div class="top">
  Convide Amigos
</div>

<div class="box">

  <div>
    Compartilhe seu link exclusivo e ganhe benefícios quando seus amigos utilizarem o RF Driver.
  </div>

  <div class="link" id="linkConvite"></div>

  <button onclick="copiar()">Copiar link</button>

  <button onclick="compartilhar()">Compartilhar</button>

</div>

<script>

function gerarID(){
  return "u" + Math.random().toString(36).substring(2,9);
}

function init(){

  let id = localStorage.getItem("rf_usuario_id");

  if(!id){
    id = gerarID();
    localStorage.setItem("rf_usuario_id", id);
  }

  const link =
    window.location.origin +
    window.location.pathname.replace("convite.html","") +
    "?ref=" + id;

  document.getElementById("linkConvite").innerText = link;
}

init();

function copiar(){
  const texto = document.getElementById("linkConvite").innerText;
  navigator.clipboard.writeText(texto);
  alert("Link copiado!");
}

function compartilhar(){
  const texto = document.getElementById("linkConvite").innerText;

  if(navigator.share){
    navigator.share({
      title:"RF Driver",
      text:"Cadastre-se no RF Driver pelo meu link:",
      url:texto
    });
  }else{
    copiar();
  }
}

</script>

</body>
</html>