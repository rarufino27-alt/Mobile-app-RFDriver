<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Taxas ‚Äì RF DRIVER</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="./theme/theme.css">
<link rel="stylesheet" href="./theme/layout.css">
<link rel="stylesheet" href="./theme/components.css">

<style>
.page{
  min-height:100vh;
  display:flex;
  justify-content:center;
  padding:20px;
}

.container{
  width:100%;
  max-width:420px;
  display:flex;
  flex-direction:column;
  gap:18px;
}

.header{
  padding:18px;
  border-radius:22px;
  background:linear-gradient(180deg,var(--card),#0b2238);
  color:#fff;
  text-align:center;
  box-shadow:0 14px 36px rgba(0,0,0,.35);
}

.header h1{
  font-size:1.5rem;
  font-weight:800;
}

.block{
  background:#ffffff;
  border-radius:18px;
  padding:16px;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
}

label{
  font-size:.8rem;
  font-weight:700;
  margin-bottom:6px;
  display:block;
  color:#0b1b2b;
}

select,
input[type="number"],
textarea{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:1px solid #cfd8e3;
  background:#ffffff;
  color:#0b1b2b;
  font-size:.95rem;
}

.extra{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px;
  border-radius:14px;
  border:1px solid #e2e8f0;
  margin-bottom:8px;
  transition:.25s;
}

.extra.active{
  background:rgba(212,175,55,.12);
  border-color:var(--gold);
}

.btn-primary{
  padding:18px;
  border-radius:18px;
  border:none;
  background:linear-gradient(145deg,var(--gold-light),var(--gold));
  font-size:1.05rem;
  font-weight:800;
  color:#0b1b2b;
}

   .btn-secondary{
  padding:14px;
  border-radius:16px;
  border:1px solid #0b1b2b;
  background:#ffffff;
  color:#0b1b2b;
  font-weight:600;
}

</style>
</head>

<body>

<div class="page">
<div class="container">

<div class="header">
  <h1>Configura√ß√£o de Taxas</h1>
  <span>Selecione adicionais da viagem</span>
</div>

<div class="block">
  <label>üöñ Tipo de viagem</label>
  <select id="tipoViagem">
    <option value="ida">Ida</option>
    <option value="bate_volta">Bate e volta</option>
    <option value="ida_volta">Ida e volta (At√© 30min)</option>
    <option value="ida_volta_espera">Ida e volta com espera</option>
  </select>
</div>

<div class="block">
  <div class="extra"><span>üõ£Ô∏è Desvio r√°pido</span><input type="checkbox" id="desvioSimples"></div>
  <div class="extra"><span>üèñÔ∏è Volta das praias</span><input type="checkbox" id="voltaPraia"></div>
  <div class="extra"><span>üöê Ve√≠culo 6 lugares</span><input type="checkbox" id="veiculo6"></div>
  <div class="extra"><span>üõí Taxa de feira</span><input type="checkbox" id="taxaFeira"></div>
  <div class="extra"><span>üåô Adicional noturno</span><input type="checkbox" id="taxaNoturna"></div>
</div>

<div class="block">
  <label>üê∂ Transporte de animal</label>
  <select id="animal">
    <option value="0">N√£o</option>
    <option value="4.99">Pequeno ‚Äì R$ 4.99</option>
    <option value="6.99">M√©dio ‚Äì R$ 6.99</option>
    <option value="9.99">Grande ‚Äì R$ 9.99</option>
    <option value="19.90">Viagem longa ‚Äì R$ 19.90</option>
  </select>
</div>

<div class="block">
  <label>‚è±Ô∏è Tempo de espera (min)</label>
  <input type="number" id="minutosEspera" placeholder="Ex: 10">
</div>

<div class="block">
  <div class="extra">
    <span>üìÖ Viagem agendada</span>
    <input type="checkbox" id="viagemAgendada">
  </div>

  <div id="agendamentoCampos" style="display:none;margin-top:12px;">
    <label>Data</label>
    <input type="date" id="dataAgendamento">

    <label style="margin-top:10px;">Hora</label>
    <input type="time" id="horaAgendamento">
  </div>
</div>

<div class="block">
  <label>üìù Observa√ß√£o</label>
  <textarea id="observacao" placeholder="Informa√ß√µes adicionais..."></textarea>
</div>

   <div style="display:flex; flex-direction:column; gap:12px; margin-top:10px;">
    <button class="btn-primary" onclick="salvarTaxas()">
    Ir para Resumo da Viagem
  </button>

  <button class="btn-secondary" onclick="App.go('destino.html')">
    ‚¨Ö Voltar
  </button>

</div>
</div>

<script src="core/global.js"></script>

<script>
const viagemAgendada = document.getElementById("viagemAgendada");
const agendamentoCampos = document.getElementById("agendamentoCampos");

viagemAgendada.addEventListener("change", () => {
  agendamentoCampos.style.display = viagemAgendada.checked ? "block" : "none";
});

document.querySelectorAll("input[type='checkbox']").forEach(el=>{
  el.addEventListener("change",()=>{
    el.closest(".extra")?.classList.toggle("active", el.checked);
  });
});

function salvarTaxas(){

  const viagemAgendadaChecked = document.getElementById("viagemAgendada").checked;
  const data = document.getElementById("dataAgendamento").value;
  const hora = document.getElementById("horaAgendamento").value;

  if (viagemAgendadaChecked && (!data || !hora)) {
    alert("Selecione data e hora da viagem agendada.");
    return;
  }

  const dados = {
    tipoViagem: document.getElementById("tipoViagem").value,
    desvioSimples: document.getElementById("desvioSimples").checked,
    voltaPraia: document.getElementById("voltaPraia").checked,
    veiculo6: document.getElementById("veiculo6").checked,
    taxaFeira: document.getElementById("taxaFeira").checked,
    taxaNoturna: document.getElementById("taxaNoturna").checked,
    animal: document.getElementById("animal").value,
    minutosEspera: document.getElementById("minutosEspera").value,
    viagemAgendada: viagemAgendadaChecked,
    dataAgendamento: data,
    horaAgendamento: hora,
    observacao: document.getElementById("observacao").value.trim()
  };

  App.set("taxasConfig", dados);

  App.go("resumo.html");
}

</script>

</body>
</html>
